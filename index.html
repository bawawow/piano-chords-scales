<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Piano Chord Lookup Chart â€” fixed keyboard</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    /* Page layout */
    body{font-family:Inter,Segoe UI,Roboto,Arial,sans-serif;background:#f4f6f9;margin:0;padding:28px;color:#222}
    .card{max-width:920px;margin:0 auto;background:#fff;padding:24px;border-radius:12px;box-shadow:0 6px 18px rgba(12,20,30,0.06)}
    h1{margin:0 0 12px;font-size:26px}
    .controls{display:flex;gap:8px;align-items:center;margin-bottom:16px}
    select,button{padding:8px 11px;border-radius:8px;border:1px solid #d1d5db;background:#fbfbfc;cursor:pointer}
    table{width:100%;border-collapse:collapse;margin-top:6px}
    th,td{padding:12px;border-bottom:1px solid #eef2f6;text-align:left}
    th{background:#f3f6f9;font-weight:700}
    tr:hover{background:#fbfdff;cursor:pointer}
    p.info{color:#6b7280;margin:12px 0 0}

    /* Keyboard container sized to 7 white keys */
    :root{
      --white-w:56px;
      --white-h:160px;
      --black-w:36px;
      --black-h:100px;
    }

    #keyboardWrap{display:flex;justify-content:center;margin-top:26px}
    #keyboard{position:relative;width:calc(var(--white-w) * 7);height:var(--white-h);background:transparent}

    /* white keys: laid out inline inside keyboard container */
    .white-key{
      display:inline-block;
      width:var(--white-w);
      height:var(--white-h);
      background:#fff;
      border:1px solid #bfc7cf;
      box-sizing:border-box;
      position:relative;
      vertical-align:top;
      z-index:1;
    }

    /* black keys absolutely positioned over the container */
    .black-key{
      position:absolute;
      width:var(--black-w);
      height:var(--black-h);
      background:#111;
      border:1px solid #111;
      z-index:2;
      box-sizing:border-box;
      transform:translateX(-50%); /* center on the computed left position */
    }

    /* highlights: white vs black separate styles to avoid orange-mix */
    .white-key.highlight{background:#ffec5c;border-color:#c9a900}
    .black-key.highlight{outline:3px solid #ffd166; box-shadow:0 0 0 1px rgba(255,209,102,0.15) inset}

    /* small responsive behavior */
    @media(max-width:600px){
      :root{--white-w:40px;--white-h:120px;--black-w:26px;--black-h:80px}
      .card{padding:18px}
    }
  </style>
</head>
<body>
  <div class="card">
    <h1>Piano Chord Lookup Chart</h1>

    <div class="controls">
      <label for="root">Root:</label>
      <select id="root">
        <option>C</option><option>C#</option><option>D</option><option>D#</option>
        <option>E</option><option>F</option><option>F#</option><option>G</option>
        <option>G#</option><option>A</option><option>A#</option><option>B</option>
      </select>

      <button id="btnChords">Chords</button>
      <button id="btnScales">Scales</button>
    </div>

    <table id="chart">
      <thead><tr><th>Chord / Scale</th><th>Notes</th></tr></thead>
      <tbody></tbody>
    </table>

    <p class="info">This chart shows chords/scales for the selected root. Click a row to highlight it on the keyboard.</p>
  </div>

  <div id="keyboardWrap">
    <div id="keyboard" aria-hidden="true"></div>
  </div>

  <script>
    /* Data */
    const NOTES = ["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];
    const WHITE_ORDER = ["C","D","E","F","G","A","B"]; // 7 whites in order
    const BLACK_FOR = { C: "C#", D:"D#", F:"F#", G:"G#", A:"A#" }; // black keys that follow these whites

    const CHORDS = {
      "Major": [0,4,7],
      "Minor": [0,3,7],
      "7 (Dom)": [0,4,7,10],
      "Maj7": [0,4,7,11],
      "m7": [0,3,7,10],
      "Sus2": [0,2,7],
      "Sus4": [0,5,7],
      "Dim": [0,3,6]
    };

    const SCALES = {
      "Major Scale": [0,2,4,5,7,9,11],
      "Natural Minor": [0,2,3,5,7,8,10]
    };

    /* Build keyboard: 7 whites and black keys absolutely positioned */
    const keyboard = document.getElementById("keyboard");
    const whiteW = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--white-w')) || 56;
    const blackW = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--black-w')) || 36;

    // Create white keys inline
    WHITE_ORDER.forEach((pitch, i) => {
      const w = document.createElement('div');
      w.className = 'white-key';
      w.dataset.pitch = pitch; // e.g. "C"
      keyboard.appendChild(w);
    });

    // Create black keys & position by calculating left offsets (centered between neighbouring white keys)
    // For each white that should have a following black, we position the black key at (index + 1) * whiteW - (whiteW/2)
    Object.entries(BLACK_FOR).forEach(([whitePitch, blackPitch]) => {
      const index = WHITE_ORDER.indexOf(whitePitch);
      if (index >= 0) {
        const left = (index + 1) * whiteW - (whiteW / 2);
        const b = document.createElement('div');
        b.className = 'black-key';
        b.dataset.pitch = blackPitch; // e.g. "C#"
        b.style.left = left + 'px';
        keyboard.appendChild(b);
      }
    });

    /* Utility: get notes for root + interval list */
    function notesFor(root, intervals) {
      const rootIndex = NOTES.indexOf(root);
      return intervals.map(i => NOTES[(rootIndex + i) % 12]);
    }

    /* Render table rows for a dictionary (chords or scales) */
    function renderDict(dict, root) {
      const tbody = document.querySelector('#chart tbody');
      tbody.innerHTML = '';
