<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Fingerin Mo</title>
<style>
  body { font-family: Arial, sans-serif; background: #f5f7fa; padding: 20px; }
  .container { background: #fff; padding: 20px; border-radius: 10px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1); margin-bottom: 20px; }
  table { border-collapse: collapse; width: 100%; margin-top: 10px; }
  td { border: 1px solid #ddd; padding: 8px; }
  tr:hover { background: #f0f0f0; cursor: pointer; }
  .keyboard { position: relative; width: 840px; height: 200px; }
  .key.white { position: absolute; width: 60px; height: 200px;
    border: 1px solid #000; background: #fff; z-index: 1; }
  .key.black { position: absolute; width: 40px; height: 120px;
    background: #000; z-index: 2; }
  .key.highlight.white { background: yellow !important; }
  .key.highlight.black { background: orange !important; }
</style>
</head>
<body>

<div class="container">
  <h2>Piano Chord Lookup Chart</h2>
  Root: 
  <select id="root"></select>
  <button onclick="showChords()">Chords</button>
  <button onclick="showScales()">Scales</button>

  <table id="chart"></table>
  <small>This chart shows chords/scales for the selected root. 
  Click a row to highlight it on the keyboard.</small>
</div>

<div class="keyboard" id="keyboard"></div>

<script>
const chords = {
  "Major": [0, 4, 7],
  "Minor": [0, 3, 7],
  "7 (Dom)": [0, 4, 7, 10],
  "Maj7": [0, 4, 7, 11],
  "m7": [0, 3, 7, 10],
  "Sus2": [0, 2, 7],
  "Sus4": [0, 5, 7],
  "Dim": [0, 3, 6]
};

const scales = {
  "Major Scale": [0, 2, 4, 5, 7, 9, 11],
  "Minor Scale": [0, 2, 3, 5, 7, 8, 10]
};

const notes = ["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];
const keyboard = document.getElementById("keyboard");

// --- build 2-octave keyboard (C to B twice) ---
let keyMap = []; // maps position -> note index
let whitePos = 0;
for (let octave=0; octave<2; octave++) {
  for (let i=0;i<notes.length;i++) {
    let note = notes[i];
    if (!note.includes("#")) { // white key
      let div=document.createElement("div");
      div.classList.add("key","white");
      div.style.left = `${whitePos*60}px`;
      div.dataset.index = i + octave*12; // exact index
      keyboard.appendChild(div);
      whitePos++;
    }
  }
}
whitePos=0;
for (let octave=0; octave<2; octave++) {
  for (let i=0;i<notes.length;i++) {
    let note=notes[i];
    if (note.includes("#")) { // black key
      let offset=[1,2,4,5,6,8,9,11].includes(i)?true:false;
      if(offset){
        let left = (whitePos*60)-20;
        if (note==="C#"||note==="F#") left+=40;
        if (note==="D#"||note==="G#"||note==="A#") left+=100;
      }
    }
  }
}
// --- simpler fixed black positioning ---
const blackOffsets = { "C#":40,"D#":100,"F#":220,"G#":280,"A#":340 };
for (let octave=0; octave<2; octave++) {
  let base = octave*420; // 7 white keys * 60
  for (let [n,off] of Object.entries(blackOffsets)){
    let div=document.createElement("div");
    div.classList.add("key","black");
    div.style.left=`${base+off}px`;
    div.dataset.index = notes.indexOf(n)+octave*12;
    keyboard.appendChild(div);
  }
}

// --- populate root selector ---
notes.forEach(n=>{
  let opt=document.createElement("option");
  opt.value=n; opt.text=n;
  root.appendChild(opt);
});

function showChords(){ renderTable(chords); }
function showScales(){ renderTable(scales); }

function renderTable(data){
  let root=document.getElementById("root").value;
  let table=document.getElementById("chart");
  table.innerHTML="";
  let rootIndex=notes.indexOf(root);

  for(let [name,intervals] of Object.entries(data)){
    let row=table.insertRow();
    let c1=row.insertCell(), c2=row.insertCell();
    c1.innerText=`${root} ${name}`;
    let chordNotes=intervals.map(i=>notes[(rootIndex+i)%12]);
    c2.innerText=chordNotes.join(" â€“ ");

    row.onclick=()=>highlightNotes(rootIndex,intervals);
  }
}

function highlightNotes(rootIndex,intervals){
  document.querySelectorAll(".key").forEach(k=>k.classList.remove("highlight"));
  let targetIdxs=intervals.map(i=>rootIndex+i);
  document.querySelectorAll(".key").forEach(k=>{
    if(targetIdxs.includes(parseInt(k.dataset.index))){
      k.classList.add("highlight");
    }
  });
}
</script>
</body>
</html>
